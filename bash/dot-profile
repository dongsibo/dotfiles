#
# ~/.profile
#

[ -n "$BASH_VERSION" ] && [ -r "$HOME/.bashrc" ] && . "$HOME/.bashrc"

[ -d "$HOME/bin" ] && PATH="$HOME/bin:$PATH"
[ -d "$HOME/.local/bin" ] && PATH="$HOME/.local/bin:$PATH"

export PATH

export EDITOR=vim
export VISUAL=vim

# Universal options for less(1)
export LESS="\
--quit-if-one-screen \
--ignore-case \
--quit-on-intr \
--RAW-CONTROL-CHARS"

# Systemd has its own set of options that it passes to less. Options from LESS
# are not applied. I like the defaults used for systemctl(1) and
# journalctl(1), but I want to also add more options like case-insensitive
# search. Setting SYSTEMD_LESS overrides the default, so all desired options
# must be defined here.
export SYSTEMD_LESS="\
--chop-long-lines \
--no-init \
--LONG-PROMPT \
$LESS"

export FZF_DEFAULT_OPTS='--color=bg+:237'

# gnome-shell 1:3.36.0-2 has some bugs in the JS code that tries to start
# ibus-daemon. One of the error messages from `systemctl --usr status '*'`:
#
#     Failed to launch ibus-daemon: launcher.launch is not a function
#
# `launch` should be `spawnv` instead. There is apparently another unfixed
# issue with input method; you can look for more info here:
#
# https://gitlab.gnome.org/GNOME/gnome-shell/issues/2341
#
# Leave this bit of code in until the bug in GNOME Shell is fixed.
export GTK_IM_MODULE=ibus
export XMODIFIERS=@im=ibus
export QT_IM_MODULE=ibus
ibus-daemon --daemonize --xim

# vim: set filetype=sh:
